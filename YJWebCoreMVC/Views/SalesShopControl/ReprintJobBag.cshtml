@*
    Created by Phanindra 04-Nov-2025
*@

@{
        Layout = "~/Views/Shared/_LayoutNew.cshtml";
}

@*<h2>RePrintJobBag</h2>*@

<div id="content-center" class="row">

    <div class="web-form page login-page col-sm-12" id="FormForVendorStatement">

        <div class="form-horizontal">

            <div class="row">
                <div class="col-sm-4">
                    <div class="row">
                        <label class="col-sm-4 text-right">
                            JobBag #
                        </label>
                        <div class="col-sm-8">
                            <input type="text" id="txtJobBagNo" value="@ViewBag.JobBagNo" class="form-control activateFormRefreshBtn jobBagNo" placeholder="Enter JobBag No.">
                            <div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-4">
                </div>
            </div>
        </div>

        <div class="mt-4 white-box pos-rel" id="divDataTableReport">

            <div class="row col-md-6 report_buttons">
                <div style="margin:3px;">
                    <input type="button" value="PDF" class="formsGlobalUniqueBtn btnDataTableDownloadPDF1" id="getReprintJobBagtoPdf" />
                </div>
                <div style="margin:3px;">
                    <input type="button" value="Excel" class="formsGlobalUniqueBtn btnDataTableDownloadExcel1" id="getReprintJobBagtoExcel" />
                </div>
                <div style="margin:3px;">
                    <input type="button" value="Preview" id="btnDataTablePreview1" class="formsGlobalUniqueBtn jobBagNoForPrint" />
                </div>
                <div style="margin:3px;">
                    <input type="button" value="Print" id="btnDataTablePrint1" class="formsGlobalUniqueBtn jobBagNoForPrint1" />
                </div>
                <div style="margin:3px;display:none;">
                    <input type="button" value="Email" class="formsGlobalUniqueBtn" />
                </div>
                <div style="margin:3px;display:none;">
                    <input type="button" value="Simple Excel" class="formsGlobalUniqueBtn" />
                </div>
            </div>

        </div>
        <br />

    </div>
</div>

<script type="text/javascript">
    $(document).ready(function () {
       // formPrintJobBag();
       // $('#txtJobBagNo').val(@ViewBag.JobBagNo);
    });

    $(document).on("click", "#btnDataTablePreview1", function () {
        jobBagNo = $('#txtJobBagNo').val();
        if (jobBagNo == "") {
            alert('Please Enter JobBag No.!');
            return;
        }
        else
            GenerateJobBag("Preview");
    });

    $(document).on("click", "#btnDataTablePrint1", function () {
        jobBagNo = $('#txtJobBagNo').val();
        if (jobBagNo == "") {
            alert('Please Enter JobBag No.!');
            return;
        }
        else
            GenerateJobBag("Print");
    });


    $(document).on("click", "#getReprintJobBagtoPdf", function () {
        jobBagNo = $('#txtJobBagNo').val();
        if (jobBagNo == "") {
            alert('Please Enter JobBag No.!');
            return;
        }
        else
            GenerateJobBag("Pdf");
    });

    $(document).on("click", "#getReprintJobBagtoExcel", function () {
        jobBagNo = $('#txtJobBagNo').val();
        if (jobBagNo == "") {
            alert('Please Enter JobBag No.!');
            return;
        }
        else
            GenerateJobBag("Excel");
    });

    function GenerateJobBag(clickOption) {
        //$('body').removeClass('loaded');
        var jobBagNo = $('#txtJobBagNo').val();
        fetchJobBagDetails(jobBagNo, clickOption);
    }
    function fetchJobBagDetails(jobBagNo, clickOption) {
        //$('body').removeClass('loaded');
        //$('body').addClass('loading');
        $.ajax({
            url: "../SalesShopControl/PrintJobBag",
            type: 'post',
            data: {
                jobbagno: jobBagNo,
                //IsListOfJobBagsPrint: false,
                settername: ""
            },
            success: function (result) {
                $("#previewContentModalLabel").html("Print JobBag Details");
                $('#previewContentModal .previewContent').html(result);
                $("#previewContentModal").show();
                $("#previewContentModal").addClass("show");
                if (clickOption == "Preview" || clickOption == "Print") {
                    $("#previewContentModal").show();
                    $("#previewContentModal").addClass("show");
                }
                if (clickOption == "Pdf") {
                    $("#previewContentModal").show();
                    $("#previewContentModal").addClass("show");
                    pdfNormalHtmlDiv("previewContent");
                    $("#previewContentModal").hide();
                    $("#previewContentModal").removeClass("show");
                }
                if (clickOption == "Excel") {
                    excelFromNormalDivTable("previewContent");
                }
            },
            error: function () {
                alert("An error occurred while fetching the JobBag details.");
            },
            complete: function () {
                $('body').removeClass('loading');
                $('body').addClass('loaded');
            }
        });
    }


</script>

